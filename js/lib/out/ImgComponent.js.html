<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ImgComponent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ImgComponent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { EventComponent } from './EventComponent.js'
import { Vector } from './Vector.js'
import { Size } from './Size.js'

/**
 * @author vincent jeanvoine
 * @mail hypnolog@yahoo.fr
 * 
 * @version 0.0.1
 * 
 * @classdesc représente un objets image a afficher sur le canvas
 * @augments EventComponent
 */

export class ImgComponent extends EventComponent{
    /**
     * @param {Object} data - contient toutes les données de configuration de l'objet
     * @description constructor: crée un nouvel object 2d ImgComponent
     */
    constructor(data){
        super(data)

        //source 
        this.source = data.source

        this.image = data.image;
        this.image.addEventListener('load', (e) => {
            if(this.source.size.width == 0 &amp;&amp; this.source.size.height == 0)
                this.source.size = new Size(this.image.width, this.image.height)

            if(typeof data.size == 'undefined')
                data.size = new Size(this.image.width, this.image.height)
            this.size = data.size
        })
    }

    /**
     * @description les données de l'image source
     * @member {Source}
     */
    set source(val = new Source){
        if(val.constructor.name != 'Source')
            throw new Error('"source" ' + this.msgErrorAfect + ' "Source"')
        this._source = val
    }

    get source(){
        return typeof this._source != 'undefined' ? this._source : new Source
    }

    /**
     * @description déssine l'object 2d "ImgComponent" (est appelé de manière automatique par la method Component.update)
     * @override
     * @method
     */
    draw(){
        this.transform()

        this.rotate()

        this.drawImage()
        
        this.resetTransform()
    }

    /**
     * @description prepare la position et l'inclinaison de l'objet pour le déssiner sur le canvas (est appelé de manière automatique par la method ImgComponent.draw)
     * @method
     */
    transform(){
        let inclinaison = this.inclinaison,
        position = this.position
        if(typeof this.animations.curent != 'undefined'){
            inclinaison = typeof this.animations.curent.inclinaison == 'function' ? this.animations.curent.inclinaison(this) : inclinaison
            position = typeof this.animations.curent.position == 'function' ? this.animations.curent.position(this) : position
        }

        this.scene.context.setTransform(
            1,
            inclinaison.x,
            inclinaison.y,
            1,
            position.x,
            position.y
        )
    }

    /**
     * @description prepare la rotate de l'objet pour le déssiner sur le canvas (est appelé de manière automatique par la method ImgComponent.draw)
     * @method
     */
    rotate(){
        let angle = this.angle.rad
        if(typeof this.animations.curent != 'undefined'){
            angle = typeof this.animations.curent.angle == 'function' ? this.animations.curent.angle(this) : angle
        }

        this.scene.context.translate(this.axe.x, this.axe.y)
        this.scene.context.rotate(angle)
        this.scene.context.translate(-this.axe.x, -this.axe.y)
    }

    /**
     * @description déssiner l'objet 2d  sur le canvas (est appelé de manière automatique par la method ImgComponent.draw)
     * @method
     */
    drawImage(){
        let size = this.size,
        sourcePos = new Vector(
            this.source.tile.x > 0 ? this.source.size.width * this.source.tile.x : this.source.position.x > 0 ? this.source.position.x : 0,
            this.source.tile.y > 0 ? this.source.size.height * this.source.tile.y : this.source.position.y > 0 ? this.source.position.y : 0
        )


        if(typeof this.animations.curent != 'undefined'){
            size = typeof this.animations.curent.size == 'function' ? this.animations.curent.size(this) : size
        }


        this.scene.context.drawImage(
            this.image,
            sourcePos.x,
            sourcePos.y,
            this.source.size.width,
            this.source.size.height,
            0,// la position est placer dans "transform"
            0,
            size.width,
            size.height
        )
    }

    /**
     * @description restor les transformation après avoir déssiné l'object 2d (est appelé de manière automatique par la method ImgComponent.draw)
     * @method
     */
    resetTransform(){
        this.scene.context.setTransform(1, 0, 0, 1, 0, 0)
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Angle.html">Angle</a></li><li><a href="Animation.html">Animation</a></li><li><a href="Animations.html">Animations</a></li><li><a href="AssetsBank.html">AssetsBank</a></li><li><a href="Component.html">Component</a></li><li><a href="EventComponent.html">EventComponent</a></li><li><a href="FileLoader.html">FileLoader</a></li><li><a href="ImgComponent.html">ImgComponent</a></li><li><a href="Scene.html">Scene</a></li><li><a href="Size.html">Size</a></li><li><a href="Source.html">Source</a></li><li><a href="Vector.html">Vector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sat Mar 20 2021 11:43:51 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
